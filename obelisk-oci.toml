api.listening_addr = "127.0.0.1:5005"   # Address and port on which the API server will listen.
webui.listening_addr = "127.0.0.1:8080" # Address and port on which the webui will listen.

[log.stdout]
enabled = true

[[activity_wasm]]
name = "activity_llm_chatgpt"
location.oci = "docker.io/getobelisk/demo_stargazers_activity_llm_chatgpt:2025-05-07@sha256:7bb4bafd3e8b4f95f612eee78f8aebbacef2e08e7142d7a1cd768c1013d98662"
exec.lock_expiry.seconds = 10
env_vars = ["OPENAI_API_KEY"]

[[activity_wasm]]
name = "activity_github_impl"
location.oci = "docker.io/getobelisk/demo_stargazers_activity_github_impl:2025-05-07@sha256:ffcb12bd2330b442008d711541989e0720766358d3891527cf9735053104e324"
env_vars = ["GITHUB_TOKEN"]
exec.lock_expiry.seconds = 5

[[activity_wasm]]
name = "activity_db_turso"
location.oci = "docker.io/getobelisk/demo_stargazers_activity_db_turso:2025-05-07@sha256:706d1d8ec9262d792ac638d4e592fb1421fde7845e0a414de279e262c6a2c2e0"
env_vars = ["TURSO_TOKEN", "TURSO_LOCATION"]
exec.lock_expiry.seconds = 5

[[workflow]]
name = "workflow"
location.oci = "docker.io/getobelisk/demo_stargazers_workflow:2025-05-07@sha256:a4dce7413f959fb7b4e99c2bd9e6c1c4f1bc44d8fe94c1768464c0f6871a8304"
backtrace.sources = {"/home/runner/work/demo-stargazers/demo-stargazers/workflow/src/lib.rs" = "${OBELISK_TOML_DIR}/workflow/src/lib.rs"}

[[http_server]]
name = "webhook_server"
listening_addr = "0.0.0.0:9090"

[[webhook_endpoint]]
name = "webhook"
location.oci = "docker.io/getobelisk/demo_stargazers_webhook:2025-05-07@sha256:c2417b421e98585e0c21eb1cc18f22f176a512c69e45243e36e5067b5a66569d"
http_server = "webhook_server"
routes = [{ methods = ["POST", "GET"], route = "" }]
forward_stdout = "stderr"
forward_stderr = "stderr"
env_vars = [
    "GITHUB_WEBHOOK_SECRET",
    # "GITHUB_WEBHOOK_INSECURE=true" # to disable signature verification
]
backtrace.sources = {"/home/runner/work/demo-stargazers/demo-stargazers/webhook/src/lib.rs" = "${OBELISK_TOML_DIR}/webhook/src/lib.rs"}

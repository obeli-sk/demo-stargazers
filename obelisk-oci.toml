api.listening_addr = "127.0.0.1:5005"   # Address and port on which the API server will listen.
webui.listening_addr = "127.0.0.1:8080" # Address and port on which the webui will listen.

[log.stdout]
enabled = true

[[http_server]]
name = "webhook_server"
listening_addr = "0.0.0.0:9090"

[[activity_wasm]]
name = "activity_llm_openai"
location.oci = "docker.io/getobelisk/demo_stargazers_activity_llm_openai:2025-09-01@sha256:9cde0e4feb0ad69f476eeeb274628ea230314f557e1aa1a3bfa3ee05ecc584ae"
exec.lock_expiry.seconds = 10
env_vars = ["OPENAI_API_KEY"]

[[activity_wasm]]
name = "activity_github_impl"
location.oci = "docker.io/getobelisk/demo_stargazers_activity_github_impl:2025-09-01@sha256:1dd39ff12539353c12ffa36f225fcd003a7cf57ebed49c3db78f259cf556fd6c"
env_vars = ["GITHUB_TOKEN"]
exec.lock_expiry.seconds = 5

[[activity_wasm]]
name = "activity_db_turso"
location.oci = "docker.io/getobelisk/demo_stargazers_activity_db_turso:2025-09-01@sha256:87ec6d390e25640e1d968fb419086742c53f5731b29f86d567212cb46b4fa2ed"
env_vars = ["TURSO_TOKEN", "TURSO_LOCATION"]
exec.lock_expiry.seconds = 5

[[workflow]]
name = "workflow"
location.oci = "docker.io/getobelisk/demo_stargazers_workflow:2025-09-01@sha256:11c662196dd579f3f19e61caf565017a61f944140fa8c92993c742e69a3d8da9"
backtrace.sources = { "/home/runner/work/demo-stargazers/demo-stargazers/workflow/workflow-rs/src/lib.rs" = "${OBELISK_TOML_DIR}/workflow/workflow-rs/src/lib.rs" }

[[webhook_endpoint]]
name = "webhook"
location.oci = "docker.io/getobelisk/demo_stargazers_webhook:2025-09-01@sha256:0fb0042da931bedea3f616a9eca40468032625d0fd69333dc2733f576a8887d9"
http_server = "webhook_server"
routes = [{ methods = ["POST", "GET"], route = "" }]
forward_stdout = "stderr"
forward_stderr = "stderr"
env_vars = [
    "GITHUB_WEBHOOK_SECRET",
    # "GITHUB_WEBHOOK_INSECURE=true" # to disable signature verification
]
backtrace.sources = { "/home/tomas/work/workspaces/workflow/apps/stargazers/webhook/webhook-rs/src/lib.rs" = "${OBELISK_TOML_DIR}/webhook/webhook-rs/src/lib.rs" }
